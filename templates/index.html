<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>DressGPT - å€‹äºº AI å½¢è±¡é¡§å•</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <style>
        body { background-color: #f8f9fa; font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif; }
        .hero-section { background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); color: white; padding: 40px 0; margin-bottom: 30px; }
        .score-display { font-size: 4rem; font-weight: bold; color: #764ba2; }
        .recommend-card { transition: transform 0.3s; border: none; box-shadow: 0 4px 15px rgba(0,0,0,0.1); height: 100%; }
        .recommend-card:hover { transform: translateY(-5px); }
        .card-weak { border-top: 5px solid #ffc107; }   /* è­¦å‘Šé»ƒ - å¾®èª¿ */
        .card-medium { border-top: 5px solid #0d6efd; } /* è—è‰² - é€²éš */
        .card-strong { border-top: 5px solid #198754; } /* ç¶ è‰² - æ¥µè‡´ */
        .img-preview { max-width: 100%; border-radius: 10px; box-shadow: 0 4px 10px rgba(0,0,0,0.2); }
        .outfit-img { width: 100%; height: 250px; object-fit: cover; border-radius: 5px; }
    </style>
</head>
<body>

<div class="hero-section text-center">
    <h1>DressGPT ğŸ‘—</h1>
    <p>åŸºæ–¼ 400 å¼µç²¾æº–æ¨™è¨»æ•¸æ“šçš„å€‹äººåŒ–ç©¿æ­å¼•æ“</p>
</div>

<div class="container mb-5">
    <div class="row">
        <div class="col-md-4">
            <div class="card p-4 shadow-sm">
                <h4 class="mb-4">é–‹å§‹è¨ºæ–·</h4>
                <form action="/" method="post" enctype="multipart/form-data">
                    <div class="mb-3">
                        <label class="form-label">ä¸Šå‚³ä½ çš„ç©¿æ­ç…§ç‰‡</label>
                        <input type="file" name="file" class="form-control" required>
                    </div>
                    
                    <div class="mb-3">
                        <label class="form-label">æ€§åˆ¥</label>
                        <select name="gender" class="form-select">
                            <option value="male" {% if gender=='male' %}selected{% endif %}>ç”·æ€§</option>
                            <option value="female" {% if gender=='female' %}selected{% endif %}>å¥³æ€§</option>
                        </select>
                    </div>

                    <div class="mb-3">
                        <label class="form-label">ç•¶å‰å­£ç¯€</label>
                        <select name="season" class="form-select">
                            <option value="winter" {% if season=='winter' %}selected{% endif %}>å†¬å­£ (Winter)</option>
                            <option value="summer" {% if season=='summer' %}selected{% endif %}>å¤å­£ (Summer)</option>
                            <option value="spring/fall" {% if season=='spring/fall' %}selected{% endif %}>æ˜¥ç§‹ (Spring/Fall)</option>
                        </select>
                    </div>

                    <div class="mb-3">
                        <label class="form-label">å ´åˆæ­£å¼åº¦</label>
                        <select name="formal" class="form-select">
                            <option value="casual" {% if formal=='casual' %}selected{% endif %}>ä¼‘é–’ (Casual)</option>
                            <option value="formal" {% if formal=='formal' %}selected{% endif %}>æ­£å¼ (Formal)</option>
                        </select>
                    </div>

                    <button type="submit" class="btn btn-primary w-100 py-2">ç«‹å³è©•åˆ†ä¸¦ç²å–å»ºè­°</button>
                </form>
            </div>
        </div>

        <div class="col-md-8">
            {% if score is not none %}
            <div class="card p-4 shadow-sm text-center mb-4">
                <h3>è¨ºæ–·çµæœ</h3>
                <div class="row align-items-center mt-3">
                    <div class="col-md-5">
                        <img src="{{ url_for('static', filename='uploads/' + user_img) }}" class="img-preview mb-3">
                    </div>
                    <div class="col-md-7">
                        <p class="text-muted mb-0">å¸å¼•åŠ›è©•åˆ†</p>
                        <div class="score-display">{{ score }} <small style="font-size: 1.5rem;">/ 10</small></div>
                        <p class="mt-3">ç³»çµ±å·²æ ¹æ“šæ‚¨çš„æ¢ä»¶ï¼Œå¾è³‡æ–™åº«ä¸­æŒ‘é¸å‡ºä¸‰å¥—å»ºè­°ï¼š</p>
                    </div>
                </div>
            </div>

            <div class="row g-3">
                {% for rec in recommendations %}
                <div class="col-md-4">
                    <div class="card recommend-card 
                        {% if loop.index == 1 %}card-weak{% elif loop.index == 2 %}card-medium{% else %}card-strong{% endif %} p-3">
                        <h6 class="text-center fw-bold">{{ rec.level_label }}</h6>
                        <hr>
                        {% if rec.id != "None" %}
                        <img src="{{ url_for('static', filename='dataset_images/' + rec.id + '.jpg') }}" class="outfit-img mb-2">
                        <div class="text-center">
                            <span class="badge bg-secondary">ç·¨è™Ÿ: {{ rec.id }}</span>
                            <span class="badge bg-primary">å¾—åˆ†: {{ rec.score }}</span>
                        </div>
                        <p class="small text-muted mt-2" style="height: 60px; overflow: hidden;">{{ rec.prompt }}</p>
                        {% else %}
                        <div class="text-center py-5">
                            <p class="text-muted">æ­¤å€é–“æš«ç„¡åˆé©å»ºè­°</p>
                        </div>
                        {% endif %}
                    </div>
                </div>
                {% endfor %}
            </div>
            {% else %}
            <div class="h-100 d-flex flex-column justify-content-center align-items-center text-muted">
                <img src="https://cdn-icons-png.flaticon.com/512/1110/1110547.png" width="100" class="mb-3" style="opacity: 0.3;">
                <p>è«‹åœ¨ä¸Šå‚³åœ–ç‰‡ä¸¦é¸æ“‡åƒæ•¸å¾Œé»æ“Šè¨ºæ–·</p>
            </div>
            {% endif %}
        </div>
    </div>
</div>

<footer class="text-center py-4 text-muted">
    <small>DressGPT Â© 2025 - Your Personal Aesthetic Twin</small>
</footer>

</body>
</html>