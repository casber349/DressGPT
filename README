==================================================
DressGPT 第十階段：非對稱審美加權與 LLM 診斷進化 (Asymmetric Weighting & LLM Evolution)
==================================================

第1層: 準備圖片。
text to image工具 -> 生成訓練圖片
static/dataset_images -> 儲存訓練圖片
static/dataset_info/prompts.txt -> 存放生成圖片使用的prompt
static/dataset_info/other_info.txt -> 存放生成圖片使用的negative_prompt與其他參數
convert_webp_to_jpg.py -> 轉換圖片格式工具
image_to_embedding.py -> 把圖片(.jpg)轉成embedding(.pt)
image_embeddings.pt -> 1000張圖片的embedding

第2層: 標註與整理資料。
dress_dataset.csv -> 核心資料庫
data_manager.py -> 擴展資料集
auto_tagger.py -> 利用image_embeddings.pt自動標註部分欄位
score_normalize.py -> 正規化score欄位，依照Z-score轉換成Normal Distribution(平均:5.00，標準差:1.50)
visualize.py -> 四色長條圖統計程式。統計亞洲女性(粉紅色)/亞洲男性(粉藍色)/歐美女性(橙色)/歐美男性(綠色)在各分數區間的人數比例分布
app_gallery.py，templates/gallery.html -> 直接秀出各分數區間(前四名/1~9分/後四名)的代表圖片(4張/2男2女)。方便標註者決定分數。

第3層: 訓練模型。
DressGPT_models -> 存放5個fold(fold1.pth ~ fold5.pth)
DressGPT_models/model_info.txt -> 紀錄5個模型的train/validation loss/RMSE/R2-score
train_DressGPT.py -> 訓練模型
model_arch.py -> 調整模型結構

第4層: DressGPT網頁應用程式。
app.py -> 網頁後端，負責呼叫其他模組
templates/index.html -> 網頁前端，負責使用者介面
predict_score.py -> 評分程式。使用fold1.pth ~ fold5.pth打出5個分數並取平均
feature_utils.py -> 將選單內容轉換為one-hot向量
fashion_advisor.py -> DressGPT核心大腦。負責評估與診斷使用者穿搭，並從資料庫中推薦一位好榜樣與避雷對象
inpaint_engine.py -> 呼叫Stable Diffusion重繪模型進行重繪
llm_consultant.py -> 呼叫Gemini API生成文字建議或是生成離線版文字建議

--------------------------------------------------
第 10 版重大優化細節：

1. 生成式診斷建議優化 (LLM Consultant Upgrade)
   - 語氣階層化：依據預測分數自動切換 Gemini 顧問語氣。針對 PR90+ 提供專業讚賞，針對低分段則給予直接且具建設性的「重整方案」。
   - 特徵對齊：優化 Prompt 模板，確保 LLM 輸出的文字建議與模型識別出的 tags (如 ugly, messy, sporty) 具備邏輯一致性。

2. 訓練機制與評估指標革命 (Asymmetric Training Strategy)
   - 非對稱 Z-Weighted Loss：
     * 引入「低分懲罰項 (Penalty: 0.9)」：強化對負面標籤的敏感度，解決「醜圖虛高」問題（例如雜亂穿搭由 4.21 修正至 3.68）。
     * 引入「高分獎勵項 (Reward: 0.6)」：穩定拉抬極端美學樣本的辨識度（例如高分樣本由 7.51 修正至 8.00）。
   - 指標透明化：model_info.txt 現在同步記錄 Train/Val 的 loss， RMSE 與 R2-score，提供更客觀的模型健康度診斷。

3. 邏輯 Bug 修復與重繪空間優化 (System Refinement)
   - 修正搜尋門檻：調整 fashion_advisor.py 的鄰居搜尋範圍，強制程式推薦比使用者強一定程度的樣本。
   - 優化重繪 Prompt：調整 Inpaint 引擎的 Prompt 運用空間，加入更細節的Negative Prompt。
   - 解決漂移問題：調整loss function，成功修正了 v9 時期模型容易向「平均值」靠攏的趨勢，使模型更具「敢愛敢恨」的性格。

==================================================