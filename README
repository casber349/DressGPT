==================================================
DressGPT 第七階段：混合維度評分與穩健搜尋引擎 (Algorithm Robustness Stage)
==================================================

核心檔案更新：
- train_DressGPT.py, predict_score.py (修正模型結構)
- fashion_advisor.py (搜尋邏輯完全重構、雙門檻機制實裝)
- app.py (整合診斷與分析流程、後台數據監控)
- logic_utils.py (新增 Tensor 運算優化工具)

--------------------------------------------------
技術細節與重大更新：

1. 527 維混合特徵評分模型 (Hybrid Dimension Scoring)
   - [視覺層 512維]：來自 CNN/Transformer 的 Image Embedding，負責捕捉色彩、紋理、剪裁等視覺特徵。
   - [語義層 15維]：基於 One-hot Encoding 的條件向量 (性別/場合/季節/身材/年齡)。
   - 突破點：將原本單純的「以圖搜圖」進化為「具備邏輯約束的視覺搜尋」，徹底解決跨性別或場合錯亂的推薦問題。

2. 動態雙門檻搜尋系統 (Dual-Threshold Search Engine)
   - 針對不同分數段 (高/中/低) 的使用者，設計了具備容錯能力的搜尋策略：
   - [Mode A: 精英模式 (Strict)]：
      - 優先尋找匹配度 (Match Score) > 0.4 且分數極高(榜樣)或極低(避雷)的樣本。
      - 確保推薦對象在視覺上與使用者高度相似，具有參考價值。
   - [Mode B: 生存模式 (Fallback)]：
      - 當精英模式搜尋失敗時自動觸發。
      - 改為尋找「比使用者好/壞一點點」的鄰居 (User Score ± 0.1)。
      - 徹底解決了容易遭遇空集合回傳 (None) 的系統崩潰問題。

3. 硬約束與軟權重過濾 (Hard Constraints & Soft Weights)
   - [硬約束]：實作矩陣連乘過濾 (Matrix Multiplication Masking)。性別或場合不符者，權重直接歸零 (一票否決)。
   - [軟權重]：針對年齡、身材等模糊標籤採用加權評分 (0.2~1.0)，保留推薦的多樣性與彈性。
   - 演算法優化：將 Pandas Series 運算全面轉為 PyTorch Tensor 運算，解決了布林值歧義 (Boolean Value Ambiguous) 的底層報錯。

4. 系統透明化與白箱監控 (White-box Monitoring)
   - 後台終端機 (Terminal) 現可即時顯示搜尋細節，包括：
      - 原始評分 (Raw Score)
      - 最終匹配度 (Cosine * Logic Match)
      - 觸發模式 (Strict / Fallback)
   - 開發者能直觀判斷推薦品質，不再依賴黑箱猜測。

--------------------------------------------------
實驗結果:
原圖: 4.13 (PR 28)
DressGPT優化後 5.58 (PR 65)
==================================================