第一階段：視覺語義抽取 (Embedding Stage)

    核心檔案：image_to_embedding.py

    技術細節：
    利用預訓練模型將 400 張穿搭照片轉化為 512 維的向量特徵 (Embedding)。
    這是系統的「審美大腦」，所有的相似度比對（找出鄰居）都建立在這些向量的空間距離上。

第二階段：數據庫與正規化 (Dataset Stage)

    核心檔案：data_manager.py / dress_dataset.csv

    技術細節：
    分數正規化：將原始評分調整為平均值 5.0、標準差 1.5 的常態分佈，使分數具備統計學意義。
    標籤化工程：手動標註每張照片的 pos_tags (優點) 與 neg_tags (地雷)，並使用 gender (性別)、season (季節)、formal (場合) 等硬性過濾欄位。

第三階段：模型訓練 (Training Stage)

    核心檔案：train_DressGPT.py

    技術細節：
    根據正規化後的分數重新訓練評分模型。
    此階段確保模型能理解「高分與低分的特徵邊界」，作為 App 端重繪後「二次評分」的權威判斷標準。

第四階段：應用整合與重繪引擎 (App Stage)

    核心檔案：app.py / fashion_advisor.py / inpaint_engine.py

    技術細節：
    性別硬過濾：在搜尋鄰居前先行過濾異性樣本。確保男用戶只參考男鄰居，徹底解決「男扮女裝」的邏輯錯誤。
    三段式 Prompt 引擎：
    [基礎層]：鎖定高畫質與正確人體比例。
    [條件層]：強制執行用戶選定的性別與季節參數（如 man standing, summer outfit）。
    [鄰居層]：動態提取最像的好鄰居標籤，並透過「19 階權重映射表 (0.7~1.3)」進行精準微調，避免權重過高導致的畫面潰爛。


AI 顧問升級：Gemini 2.5 Flash 整合

1. 統計學診斷邏輯：
修正 LLM 對分數的認知：5.0 分為 PR50 (平均水準)，6.5 分以上為 PR84 (優秀)。
根據 PR 值自動切換語氣：高分給予鑑定式稱讚；4-5 分給予肯定並建議微調；3.5 分以下才進行嚴厲批判。

2. 事實錨定與防瞎扯機制：
強制傳入資料庫中的原始標籤數據 (pos_tags/neg_tags)。
顧問診斷必須「有憑有據」，嚴禁憑空想像用戶身上不存在的配件或缺陷。

3.API 高可用性容錯：
若 Gemini 2.5 Flash API 失效或 Token 超限，系統將自動觸發「備用建議模式」。
直接將分析到的鄰居標籤與 PR 統計地位格式化輸出，確保用戶隨時能獲得實質的回饋數據。

本次 commit 透過精準控制權重，連續測試多張照片皆未出現人體畸形。